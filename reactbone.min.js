/*
  @name Reactbone
  @author Chris Andrejewski <chrisishereladies@gmail.com>
  @license GPL v2
  @source http://github.com/andrejewski/reactbone
*/
(function(){var t,e,r,n
"undefined"==typeof window||"function"==typeof require?(n=require("underscore"),t=require("backbone"),e={},r=e,"undefined"!=typeof module&&(module.exports=r)):e=this,e.ReactModel=t.Model.extend({property:function(t,e){var r
if(this.properties=this.properties||{},"object"==typeof t)r=t
else{if(!e)return this.properties[t]
r={},r[t]=e}return n.each(r,function(t){return function(e,r){var i,o,s,c
return t[r]=t.properties[r]=e,c=function(t,e,n){return this.trigger("change:_"+r,this,this.toReactProps(r),n),this.trigger("change",this,n)},i=n.bind(c,t),t.listenTo(e,"change add destroy remove",i),t.toReactProps(r),s=function(t,n){return null==n&&(n=this.get(r)),"object"==typeof n&&(e.set(n,{remove:!1}),this.toReactProps(r)),this.unset(r)},o=n.bind(s,t),t.on("change:"+r,o),o()}}(this)),this},helper:function(t,e){var r
if(this.helpers=this.helpers||{},"object"==typeof t)r=t
else{if(!e)return this.helpers[t]
r={},r[t]=e}return n.each(r,function(t){return function(e,r){var i
return"string"==typeof e&&(e=t[r]),t.helpers[r]=i=n.bind(e,t)}}(this)),this},toReactProps:function(t){var e,r
return this._reactors=this._reactors||{},t?(e=this.properties[t],r=this._reactors[t]=n.result(e,"toReact")||e.toJSON()):(n.each(this.properties,function(t){return function(e,r){return t._reactors[r]=n.result(e,"toReact")||e.toJSON()}}(this)),this._reactors)},toReact:function(){return n.extend(this.toJSON(),this._reactors,this.helpers)}}),e.ReactCollection=t.Collection.extend({toReact:function(){return this.map(function(){return function(t){return n.result(t,"toReact")||t.toJSON()}}(this))}})}).call(this)
